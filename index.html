<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <!-- fontawesome -->
    <script src="https://kit.fontawesome.com/9e9931aed0.js" crossorigin="anonymous"></script>
    <!-- CSS -->
    <link rel="stylesheet" href="./CSS/media.css">
    <link rel="stylesheet" href="./CSS/menu.css">
    <link rel="stylesheet" href="./CSS/slide.css">
    <link rel="stylesheet" href="./CSS/style.css">
    <!-- SheetJS for Excel export -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
    <title>Travel Japan</title>
</head>

<body>
        <header class="header">
            <h1>
                <div class="header-click">
                    <i class="fa-solid fa-globe"></i>
                        <a href="https://kimyeoju.github.io/Orumi_Project/">Travel Japan</a>
                </div>
            </h1>
                <ul class="menu">
                    <li><a href="#city-title">이용 방법</a></li>
                    <li><a href="#chat-box">여행 계획</a></li>
                    <li><a href="./join.html">회원가입</a></li>
                    <li><a href="./login.html">로그인</a></li>
                </ul>
                <a href="#" class="header_toogleBtn">
                    <i class="fas fa-bars"></i>
                </a>
        </header>
        
        <!-- main -->
        <main class="wrap">
            <div class="content-wrap">
            <!-- 슬라이드 구현 -->
            <ul class="slides">
                <!-- 첫번째 슬라이드 -->
                <input type="radio" name="radio-btn" id="img-1" checked />
                <li class="slide-container">
                <div class="slide">
                    <img src="./Img/1.jpg"/>
                </div>
                <!-- dots -->
                <div class="nav">
                <label for="img-6" class="prev">&#x2039;</label>
                <label for="img-2" class="next">&#x203a;</label>
                </div>
                </li>

                <!-- 두번째 슬라이드 -->
                <input type="radio" name="radio-btn" id="img-2" />
                <li class="slide-container">
                    <div class="slide">
                        <img src="./Img/2.jpg" />
                    </div>
                <!-- dots -->
                <div class="nav">
                    <label for="img-1" class="prev">&#x2039;</label>
                    <label for="img-3" class="next">&#x203a;</label>
                </div>
                </li>
                <!-- 세번째 슬라이드 -->
                <input type="radio" name="radio-btn" id="img-3" />
                <li class="slide-container">
                    <div class="slide">
                        <img src="./Img/3.jpeg" />
                    </div>
                <!-- dots -->
                <div class="nav">
                    <label for="img-2" class="prev">&#x2039;</label>
                    <label for="img-4" class="next">&#x203a;</label>
                </div>
                </li>
                <!-- 네번째 슬라이드 -->
                <input type="radio" name="radio-btn" id="img-4" />
                <li class="slide-container">
                    <div class="slide">
                        <img src="./Img/4.jpg" />
                    </div>
                <!-- dots -->
                <div class="nav">
                    <label for="img-3" class="prev">&#x2039;</label>
                    <label for="img-5" class="next">&#x203a;</label>
                </div>
                </li>
                <!-- 다섯번째 슬라이드 -->
                <input type="radio" name="radio-btn" id="img-5" />
                <li class="slide-container">
                    <div class="slide">
                        <img src="./Img/5.jpg" />
                    </div>
                <!-- dots -->
                <div class="nav">
                    <label for="img-4" class="prev">&#x2039;</label>
                    <label for="img-6" class="next">&#x203a;</label>
                </div>
                </li>
                <!-- 여섯번째 슬라이드 -->
                <input type="radio" name="radio-btn" id="img-6" />
                <li class="slide-container">
                    <div class="slide">
                        <img src="./Img/6.jpeg" />
                    </div>
                <!-- dots -->
                <div class="nav">
                    <label for="img-5" class="prev">&#x2039;</label>
                    <label for="img-1" class="next">&#x203a;</label>
                </div>
                </li>
                <li class="nav-dots">
                    <label for="img-1" class="nav-dot" id="img-dot-1"></label>
                    <label for="img-2" class="nav-dot" id="img-dot-2"></label>
                    <label for="img-3" class="nav-dot" id="img-dot-3"></label>
                    <label for="img-4" class="nav-dot" id="img-dot-4"></label>
                    <label for="img-5" class="nav-dot" id="img-dot-5"></label>
                    <label for="img-6" class="nav-dot" id="img-dot-6"></label>
                </li>
            </ul>
            <!-- 슬라이드 이미지 위에 텍스트 -->
            <div class="subtitle">
                <h2>여행의 모든 것 "트래블 재팬"에 오신 것을 환영합니다</h2>
                <a href="#chat-box">지금 바로 나만의 여행을 생성해보세요 !</a>
            </div>
        </div>
            
        <!-- 여행 인기 도시 top3 -->
        <div class="popular-city-title">
            <i id="location-icon"class="fa-solid fa-location-dot"></i>
            <h3>일본 여행 인기 도시 TOP 3</h3>
        </div>
        <div class="popular-city-list">
            <div class="city-box">
                <img src="./Img/tokyo.jpeg">
                <p id="city-title">Tokyo</p>
                <p>도쿄</p>
            </div>
            <div class="city-box">
                <img src="./Img/osaka.avif">
                <p id="city-title">Osaka</p>
                <p>오사카</p>
            </div>
            <div class="city-box">
                <img src="./Img/hukuoka.jpeg">
                <p id="city-title">Hukuoka</p>
                <p>후쿠오카</p>
            </div>
        </div>

        <!-- 여행 일정 계획 순서 -->
        <div id="plan-order">
            <div class="order-title">
                <p class="step">STEP 1</p>
                <p>출발지 여행지 선택</p>
            </div>
            <i id="arrow-icon"class="fa-solid fa-angle-right"></i>
            <div class="order-title">
                <p class="step">STEP 2</p>
                <p>일정 선택</p>
            </div>
            <i id="arrow-icon" class="fa-solid fa-angle-right"></i>
            <div class="order-title">
                <p class="step">STEP 3</p>
                <p>여행 테마 선택</p>
            </div>
            <i id="arrow-icon" class="fa-solid fa-angle-right"></i>
            <div class="order-title">
                <p class="step">STEP 4</p>
                <p>렌트 여부 선택</p>
            </div>
            <i id="arrow-icon"class="fa-solid fa-angle-right"></i>
            <div class="order-title">
                <p class="step">STEP 5</p>
                <p>일정 생성</p>
            </div>
        </div>

        <!-- 여행 일정 title -->
        <div id="chat-box" >
            <p>나만의 여행 플래너 트래블 재팬</p>
            <p>어떤 여행을 꿈꾸시나요?<i id="plane-icon"class="fa-solid fa-plane-departure"></i></p>
        </div>

        <!-- API 키 설정 -->
        <div class="api-key-container">
            <div class="api-key-header">
                <h3><i class="fa-solid fa-key"></i> Google Gemini API 설정</h3>
                <button type="button" id="toggle-api-section" class="toggle-button">
                    <i class="fa-solid fa-chevron-down"></i>
                </button>
            </div>
            <div id="api-key-section" class="api-key-section" style="display: none;">
                <div class="api-key-status" id="api-key-status">
                    <i class="fa-solid fa-circle-info"></i>
                    <span id="api-status-text">API 키가 설정되지 않았습니다.</span>
                </div>
                <div class="api-key-input-group">
                    <input
                        type="password"
                        id="api-key-input"
                        placeholder="Google Gemini API 키를 입력하세요"
                        class="api-key-input"
                    />
                    <button type="button" id="toggle-visibility" class="visibility-button">
                        <i class="fa-solid fa-eye"></i>
                    </button>
                </div>
                <div class="api-key-actions">
                    <button type="button" id="save-api-key" class="api-button save-button">
                        <i class="fa-solid fa-floppy-disk"></i> 저장
                    </button>
                    <button type="button" id="clear-api-key" class="api-button clear-button">
                        <i class="fa-solid fa-trash"></i> 삭제
                    </button>
                </div>
                <div class="api-key-help">
                    <p><i class="fa-solid fa-circle-question"></i> API 키 발급 방법:</p>
                    <ol>
                        <li><a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a>에 접속하세요</li>
                        <li>"Get API Key" 또는 "API 키 만들기"를 클릭하세요</li>
                        <li>생성된 API 키를 복사하여 위 입력란에 붙여넣으세요</li>
                        <li>저장 버튼을 클릭하면 브라우저에 안전하게 저장됩니다</li>
                    </ol>
                    <p class="api-security-note">
                        <i class="fa-solid fa-shield-halved"></i>
                        API 키는 브라우저의 LocalStorage에 저장되며, 서버로 전송되지 않습니다.
                    </p>
                </div>
            </div>
        </div>

        <!-- user 여행 일정 입력칸 -->
            <div class="chat-container">
                <form class="chat-form" action="post">
                    <div class="user_input">
                        <h2 class="chat-head">여행 일정을 입력해주세요</h2>
                        <!-- 출발지, 여행지 -->
                        <div class="location">
                            <!-- 출발지 -->
                            <div class="depart-airport">
                                <p>출발지</p>
                            <select id="start-point">
                                <option value="" disabled selected>출발 도시 또는 공항선택</option>
                                <option name="start-point" value="인천">인천</option>
                                <option name="start-point" value="김포">김포</option>
                                <option name="start-point" value="부산">부산</option>
                                <option name="start-point" value="광주">광주</option>
                                <option name="start-point" value="무안">무안</option>
                                <option name="start-point" value="군산">군산</option>
                                <option name="start-point" value="대구">대구</option>
                                <option name="start-point "value="진주(사천)">진주(사천)</option>
                                <option name="start-point "value="여수">여수</option>
                                <option name="start-point "value="울산">울산</option>
                                <option name="start-point "value="원주">원주</option>
                                <option name="start-point "value="청주">청주</option>
                                <option name="start-point "value="포항경주">포항경주</option>
                                <option name="start-point "value="양양">양양</option>
                                <option name="start-point "value="제주">제주</option>
                            </select>
                        </div>
                        <!-- 여행지 -->
                        <div class="arrive-airport">
                            <p>여행지</p>
                            <select id="destination">
                                <option value="" disabled selected>여행지 선택</option>
                                <optgroup label="홋카이도">
                                    <option name="destination" value="삿포로">삿포로</option>
                                </optgroup>
                                <optgroup label="도호쿠">
                                    <option name="destination" value="센다이">센다이</option>
                                </optgroup>
                                <optgroup label="간토">
                                    <option name="destination" value="도쿄">도쿄</option>
                                </optgroup>
                                <optgroup label="주부">
                                    <option name="destination" value="나고야">나고야</option>
                                </optgroup>
                                <optgroup label="간사이">
                                    <option name="destination" value="오사카">오사카</option>
                                    <option name="destination" value="교토">교토</option>
                                </optgroup>
                                <optgroup label="시코쿠">
                                    <option name="destination" value="도쿠시마">도쿠시마</option>
                                </optgroup>
                                <optgroup label="주코쿠">
                                    <option name="destination" value="히로시마">히로시마</option>
                                </optgroup>
                                <optgroup label="규슈">
                                    <option name="destination" value="규슈">규슈</option>
                                </optgroup>
                                <optgroup label="오키나와">
                                    <option name="destination" value="오키나와">오키나와</option>
                                </optgroup>
                            </select>
                        </div>
                </div>
                <!-- 출발일, 도착일 -->
                <div class="travel-date">
                    <!-- 출발일 -->
                    <div class="depart">
                        <p>출발일</p>
                        <input id="depart-schedule" type="date" name="depart">
                    </div>
                    <!-- 도착일 -->
                    <div class="arrive">
                        <p>도착일</p>
                        <input id="arrive-schedule" type="date" name="arrive">
                    </div>
                </div>
            <!-- 선호하는 여행테마 -->
            <div>
                <fieldset class="select">
                    <div class="tema-title">
                        <legend>선호하는 여행테마를 선택해주세요</legend>
                    </div>
                <ul class="user-tema">
                <li>
                    <input type="checkbox" id="favorite-food" name="tema" value="food">
                            <label for="favorite-food">식도락</label>
                </li>
                <li>
                    <input type="checkbox" id="favorite-landscape" name="tema"value="landscape">
                    <label for="favorite-landscape">자연 풍경</label>
                </li>
                <li>
                    <input type="checkbox" id="favorite-history" name="tema" value="history">
                    <label for="favorite-history">역사 유적</label>
                </li>
                <li>
                    <input type="checkbox" id="favorite-activity" name="tema" value="activity">
                    <label for="favorite-activity">액티비티</label>
                </li>
                <li>
                    <input type="checkbox" id="favorite-shopping" name="tema" value="shopping">
                    <label for="favorite-shopping">쇼핑</label>
                </li>
                <li>
                    <input type="checkbox" id="favorite-spa" name="tema" value="spa">
                    <label for="favorite-spa">온천</label>
                </li>
                </ul>
                </fieldset>
            </div>
                <!-- 차량 렌트 여부 -->
                <div>
                    <fieldset class="select">
                        <div class="rent-title">
                            <legend>차량 렌트 하시나요?</legend>
                        </div>
                        <ul class="user-rent">
                            <li>
                            <input type="radio" id="car-yes" name="car-rent" value="yes">
                            <label for="car-yes">예</label>
                            </li>
                            <li>
                                <input type="radio" id="car-no" name="car-rent" value="no">
                                <label for="car-no">아니오</label>
                            </li>
                        </ul>
                    </fieldset>
                </div>
                <!-- 일정생성 버튼, 초기화 버튼 생성 -->
                <div class="button-edit">
                    <!-- 일정생성 버튼 -->
                    <div class="create-travel">
                        <button class="submit-button" type="submit" id="button" onclick="btnshow()">일정 생성</button>
                        <div id="loading-gif" style="display: none;">
                            <img src="./Img/spin.gif" alt="로딩이미지">
                        </div>
                    </div>
                    <!-- 리셋버튼 -->
                    <div class="reset-travel">
                        <button id="button" type="reset" onclick="reset()">초기화
                        </button>
                </div>
                </div>
            </div>
        </form>
        <!-- user 여행 일정 답변 칸 -->
        <div class=chat-answer>
            <div id="answer">
                <textarea
                name="content"
                id="chat-content"
                placeholder="여행 일정이 완성되고 있습니다. 잠시만 기다려주세요 :)"></textarea>
            </div>
            <!-- Google Maps 지도 표시 -->
            <div id="map-container" class="map-container" style="display: none;">
                <h3 class="map-title">
                    <i class="fa-solid fa-map-location-dot"></i> 여행지 지도
                </h3>
                <div id="travel-map" class="travel-map">
                    <!-- 지도가 여기에 표시됩니다 -->
                </div>
                <div class="map-links">
                    <a id="google-maps-link" href="#" target="_blank" class="map-link">
                        <i class="fa-brands fa-google"></i> 구글 맵에서 크게 보기
                    </a>
                </div>
            </div>
            <!-- Excel 내보내기 버튼 -->
            <div class="export-button-container">
                <button id="export-excel-btn" class="export-button" onclick="exportToExcel()">
                    <i class="fa-solid fa-file-excel"></i> Excel로 내보내기
                </button>
                <button id="json-excel-btn" class="export-button json-excel-button" onclick="exportJSONToExcel()">
                    <i class="fa-solid fa-table"></i> JSON Excel로 내보내기
                </button>
                <button id="json-download-btn" class="export-button json-download-button" onclick="downloadJSON()">
                    <i class="fa-solid fa-code"></i> JSON 다운로드
                </button>
            </div>
        </div>
    </div>
</main>
<!-- main -->

    <!-- footer -->
    <footer class="footer">
        <div>
            <div class="icon">
                <a href="https://github.com/kimyeoju"><i id="icon"class="fa-brands fa-github"></i></a>
                <a href="https://www.instagram.com/yeoju_uj/"><i id="icon"class="fa-brands fa-instagram"></i></a>
                <a href="https://m.blog.naver.com/d_d0031?fbclid=PAAaaebyCsm_LHxDJRsaHPkBV37CbW8DErKLOhvhiKhOE8rvDjmURfPpoY19k_aem_th_AYRZifwGLHEk9tZ-Te2Zh-GCO6n2ySLsvv8wOPgJtJxTlTBhPdT0BPMWKik6sbAZ8g0" ><i id="icon" class="fa-solid fa-blog"></i></a>
            </div>
            Copyright 2023. Travel Japan All rights reserved
        </div>
    </footer>
    <!-- footer -->

    <!-- javascript 연동 -->
    <script src="./JS/data.js"></script>
    <script src="./JS/api-key-manager.js"></script>
    <script src="./JS/loader.js"></script>
    <script src="./JS/main.js"></script>
    <script src="./JS/menu.js"></script>
    <script src="./JS/reset.js"></script>
    <script src="./JS/scroll.js"></script>
    <script src="./JS/map.js"></script>
    <script src="./JS/export.js"></script>
    <script src="./JS/json-export.js"></script>
</body>
</html>